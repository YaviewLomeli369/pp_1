import{r as m,k as q,a as B,j as e,_ as x,C as d,O as i,V as l,f as t,q as p,s as j,B as R,ap as g,h as D,aO as N,ar as F,aS as L,a8 as O,e as T}from"./index-68JtM4Cd.js";function M(){const[a,f]=m.useState(""),[n,v]=m.useState(""),[h,b]=m.useState(!1),{toast:y}=q(),{data:s,isLoading:u,error:A,refetch:C}=B({queryKey:["/api/store/orders/track",a,n],queryFn:async()=>{if(!a.trim())return null;const r=new URLSearchParams({orderNumber:a.trim(),...n.trim()&&{email:n.trim()}});return T(`/api/store/orders/track?${r}`)},enabled:h&&!!a.trim(),retry:!1}),w=r=>{if(r.preventDefault(),!a.trim()){y({title:"Error",description:"Ingresa un número de pedido",variant:"destructive"});return}b(!0),C()},S=r=>{switch(r){case"pending":return e.jsx(O,{className:"w-5 h-5"});case"confirmed":case"processing":return e.jsx(N,{className:"w-5 h-5"});case"shipped":return e.jsx(L,{className:"w-5 h-5"});case"delivered":return e.jsx(F,{className:"w-5 h-5"});case"cancelled":case"refunded":return e.jsx(g,{className:"w-5 h-5"});default:return e.jsx(N,{className:"w-5 h-5"})}},P=r=>{switch(r){case"pending":return"secondary";case"confirmed":case"processing":return"default";case"shipped":return"default";case"delivered":return"default";case"cancelled":case"refunded":return"destructive";default:return"secondary"}},E=r=>({pending:"Pendiente",confirmed:"Confirmado",processing:"Procesando",shipped:"Enviado",delivered:"Entregado",cancelled:"Cancelado",refunded:"Reembolsado"})[r]||r,o=(r,c="MXN")=>(r/100).toLocaleString("es-MX",{style:"currency",currency:c}),k=r=>new Date(r).toLocaleDateString("es-MX",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(x,{className:"w-12 h-12 mx-auto mb-4 text-blue-600"}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Rastrear Pedido"}),e.jsx("p",{className:"text-muted-foreground",children:"Ingresa tu número de pedido para ver el estado de tu compra"})]}),e.jsxs(d,{className:"mb-8",children:[e.jsx(i,{children:e.jsx(l,{children:"Buscar Pedido"})}),e.jsx(t,{children:e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"orderNumber",children:"Número de Pedido *"}),e.jsx(j,{id:"orderNumber",value:a,onChange:r=>f(r.target.value),placeholder:"Ej: ORD-1234567890",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"email",children:"Email (Opcional)"}),e.jsx(j,{id:"email",type:"email",value:n,onChange:r=>v(r.target.value),placeholder:"tu-email@ejemplo.com"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Si proporcionas tu email, podrás ver más detalles del pedido"})]}),e.jsxs(R,{type:"submit",disabled:u,className:"w-full",children:[u?"Buscando...":"Buscar Pedido",e.jsx(x,{className:"w-4 h-4 ml-2"})]})]})})]}),h&&e.jsxs(e.Fragment,{children:[A&&e.jsx(d,{className:"mb-8 border-red-200",children:e.jsx(t,{className:"pt-6",children:e.jsxs("div",{className:"text-center text-red-600",children:[e.jsx(g,{className:"w-12 h-12 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Pedido no encontrado"}),e.jsx("p",{children:"No se encontró un pedido con el número proporcionado. Verifica que el número sea correcto."})]})})}),s&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(d,{children:[e.jsx(i,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[S(s.status),"Pedido ",s.orderNumber]})}),e.jsxs(t,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Estado"}),e.jsx(D,{variant:P(s.status),className:"mt-1",children:E(s.status)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Fecha del Pedido"}),e.jsx("p",{className:"font-medium",children:k(s.createdAt)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total"}),e.jsx("p",{className:"font-bold text-lg",children:o(s.total,s.currency)})]})]}),s.trackingNumber&&e.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Número de Rastreo:"})," ",s.trackingNumber]})})]})]}),s.items&&s.items.length>0&&e.jsxs(d,{children:[e.jsx(i,{children:e.jsx(l,{children:"Productos"})}),e.jsx(t,{children:e.jsx("div",{className:"space-y-4",children:s.items.map((r,c)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:r.productName}),r.variantName&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Variante: ",r.variantName]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Cantidad: ",r.quantity]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:o(r.totalPrice)}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[o(r.unitPrice)," c/u"]})]})]},c))})})]}),s.shippingAddress&&e.jsxs(d,{children:[e.jsx(i,{children:e.jsx(l,{children:"Dirección de Envío"})}),e.jsx(t,{children:e.jsx("div",{className:"space-y-1",children:typeof s.shippingAddress=="string"?e.jsx("p",{children:s.shippingAddress}):e.jsxs(e.Fragment,{children:[e.jsx("p",{children:e.jsxs("strong",{children:[s.shippingAddress.firstName," ",s.shippingAddress.lastName]})}),e.jsx("p",{children:s.shippingAddress.address1}),s.shippingAddress.address2&&e.jsx("p",{children:s.shippingAddress.address2}),e.jsxs("p",{children:[s.shippingAddress.city,", ",s.shippingAddress.state," ",s.shippingAddress.zipCode]}),e.jsx("p",{children:s.shippingAddress.country}),s.shippingAddress.phone&&e.jsxs("p",{children:["Tel: ",s.shippingAddress.phone]})]})})})]})]})]})]})})}export{M as default};
