import{a9 as we,u as Ne,k as Ce,c as ke,r as o,a as X,d as Se,j as e,l as Ee,D as ie,aa as $e,B as b,ab as Y,m as le,n as Fe,o as Le,P as ce,ac as Pe,_ as Ie,s as Ae,$ as qe,a0 as Te,a1 as Me,a2 as Oe,a3 as ze,C as De,h as T,O as Ve,V as Re,ad as Je,f as We,ae as Ue}from"./index-68JtM4Cd.js";import{N as G,F as Z,M as de}from"./footer-Z09FTuhT.js";import{S as Be}from"./seo-head-CvkVOmlP.js";import{A as z}from"./AnimatedSection-BCVpFQZW.js";import"./proxy-CmXc19OU.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=we("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Qe=`
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
`;if(typeof document<"u"){const c=document.createElement("style");c.textContent=Qe,document.head.appendChild(c)}const Ke=c=>{if(!c)return"";if(typeof window>"u")return c;const N=window.location.origin;if(c.startsWith("http://")||c.startsWith("https://"))return c;if(c.includes("/api/objects/direct-upload/")){const h=c.split("/api/objects/direct-upload/")[1]||"";return`${N}/objects/${h}`}return c.startsWith("/objects/")?`${N}${c}`:c.startsWith("/")?`${N}${c}`:`${N}/objects/${c}`};function H({src:c,alt:N,className:h,style:d}){const[v,L]=o.useState(0),x=o.useMemo(()=>Ke(c),[c]),y=o.useMemo(()=>{if(!x)return[""];const C=[x];if(c&&c.includes("/objects/")){const M=c.replace("/objects/","");C.push(`${window.location.origin}/imgs/uploads/${M}`)}const a=x.includes("?")?"&":"?";return C.push(`${x}${a}download=true`),C.push(`${x}${a}raw=true`),C},[x,c]);o.useEffect(()=>{L(0)},[x]),o.useEffect(()=>{},[v,y]);const W=y[Math.min(v,y.length-1)]||"";return e.jsx("img",{src:W,alt:N,className:h,style:d,onError:()=>{L(C=>{const a=C+1;return a>=y.length?(console.error("❌ Image failed to load after retries. Attempts:",y),y.length-1):(console.log(`🔄 Retry attempt ${a}/${y.length}: ${y[a]}`),a)})},onLoad:()=>{v>0&&console.log(`✅ Image loaded successfully on attempt ${v+1}: ${W}`)}})}function tt(){const[c,N]=Ne(),{toast:h}=Ce();ke();const d=o.useRef(!0),[v,L]=o.useState("all"),[x,y]=o.useState(""),[W,C]=o.useState(!1),[a,M]=o.useState(null),[k,P]=o.useState(1),[S,D]=o.useState(0),[ue,U]=o.useState(new Set),[g,E]=o.useState([]),[n,ee]=o.useState(!1),[B,me]=o.useState(!1),[te,fe]=o.useState(!1),{data:Q,isLoading:he}=X({queryKey:["/api/config"],staleTime:300*1e3,refetchOnWindowFocus:!1,retry:1}),{data:i,isLoading:pe}=X({queryKey:["/api/store/products"],staleTime:120*1e3,refetchOnWindowFocus:!1,retry:1}),{data:I}=X({queryKey:["/api/store/categories"],staleTime:300*1e3,refetchOnWindowFocus:!1,retry:1}),V=Se({mutationFn:async({productId:t,quantity:s=1})=>{if(!d.current||n)throw new Error("Component unmounted or navigating");const r=i?.find(l=>l.id===t);if(!r)throw new Error("Producto no encontrado");if(!r.isActive)throw new Error("El producto no está disponible");if(r.stock!==null){const l=g.find(m=>m.product.id===t)?.quantity||0,p=l+s;if(r.stock===0)throw new Error("Producto agotado");if(p>r.stock)throw new Error(`Stock insuficiente. Disponible: ${r.stock}, En carrito: ${l}, Máximo que puedes agregar: ${Math.max(0,r.stock-l)}`)}return E(l=>{const p=l.find(u=>u.product.id===t);let m;if(p){const u=p.quantity+s;m=l.map(f=>f.product.id===t?{...f,quantity:u}:f)}else m=[...l,{product:r,quantity:s}];return q(m),m}),r},onSuccess:t=>{d.current&&!n&&h({title:"Producto agregado",description:`${t.name} fue agregado al carrito.`})},onError:t=>{d.current&&!n&&h({title:"Error",description:t instanceof Error?t.message:"No se pudo agregar el producto",variant:"destructive"})}}),se=o.useMemo(()=>{if(!Q)return{isStoreEnabled:!1,appearance:{}};const t=Q?.config,s=t?.frontpage?.modulos||{},r=t?.appearance||{};return{isStoreEnabled:s.tienda?.activo,appearance:r,modules:s}},[Q]),{appearance:A}=se,xe=o.useMemo(()=>["all",...I?.map(t=>t.id)||[]],[I]),re=o.useMemo(()=>!i||n?[]:i.filter(t=>{if(!t.isActive)return!1;const s=v==="all"||t.categoryId===v,r=x===""||t.name.toLowerCase().includes(x.toLowerCase())||t.description&&t.description.toLowerCase().includes(x.toLowerCase())||t.tags&&t.tags.some(l=>l.toLowerCase().includes(x.toLowerCase()));return s&&r}),[i,v,x,n]),ge=o.useMemo(()=>g.reduce((t,s)=>t+s.product.price/100*s.quantity,0),[g]),F=o.useCallback(()=>{if(d.current)try{L("all"),y(""),C(!1),M(null),P(1),ee(!1),document.body.classList.remove("modal-open","overflow-hidden"),document.body.style.overflow=""}catch(t){console.warn("Cleanup error:",t)}},[]),ae=o.useCallback(t=>{if(d.current)try{ee(!0),F(),setTimeout(()=>{d.current&&N(t)},50)}catch(s){console.error("Navigation error:",s),N(t)}},[N,F]),q=o.useCallback(t=>{if(!(typeof window>"u"))try{localStorage.setItem("shopping-cart",JSON.stringify(t)),window.dispatchEvent(new CustomEvent("cartUpdated"))}catch(s){console.warn("Error saving cart to localStorage:",s)}},[]),R=o.useCallback(t=>{if(!(typeof window>"u"))try{localStorage.setItem("store-favorites",JSON.stringify(Array.from(t)))}catch(s){console.warn("Error saving favorites to localStorage:",s)}},[]),ve=o.useCallback(t=>{!d.current||n||U(s=>{const r=new Set(s);return r.has(t)?(r.delete(t),R(r),h({title:"Eliminado de favoritos",description:"Producto eliminado de tus favoritos"})):(r.add(t),R(r),h({title:"Agregado a favoritos",description:"Producto agregado a tus favoritos"})),r})},[h,n,R]),K=o.useCallback(t=>t==="all"?"Todas las categorías":I?.find(s=>s.id===t)?.name||t,[I]),je=o.useCallback(t=>{!d.current||n||document.visibilityState==="hidden"||(M(t),P(1),D(0))},[n]),be=o.useCallback(()=>{if(!(!a||!d.current||n)){if(a.stock!==null){const t=g.find(r=>r.product.id===a.id)?.quantity||0;if(t+k>a.stock){h({title:"Stock insuficiente",description:`Solo puedes agregar ${Math.max(0,a.stock-t)} unidades más`,variant:"destructive"});return}}V.mutate({productId:a.id,quantity:k}),M(null),P(1)}},[a,k,V,n,g,h]),ye=o.useCallback(()=>{if(!(g.length===0||!d.current||n))try{localStorage.setItem("checkoutItems",JSON.stringify(g)),C(!1),ae("/checkout")}catch(t){console.error("Checkout error:",t),d.current&&h({title:"Error",description:"No se pudo procesar el carrito. Intenta de nuevo.",variant:"destructive"})}},[g,ae,h,n]),ne=o.useCallback(()=>{if(typeof window>"u")return new Set;try{const t=localStorage.getItem("store-favorites");if(t){const s=JSON.parse(t);if(Array.isArray(s))return new Set(s.filter(r=>typeof r=="string"))}}catch(t){console.warn("Error loading favorites from localStorage:",t)}return new Set},[]),_=o.useCallback(t=>{!d.current||n||E(s=>{const r=s.filter(l=>l.product.id!==t);return q(r),r})},[n,q]),O=o.useCallback(()=>{if(typeof window>"u")return[];try{const t=localStorage.getItem("shopping-cart");if(t){const s=JSON.parse(t);if(Array.isArray(s))return s.filter(r=>r&&typeof r=="object"&&r.product&&typeof r.quantity=="number"&&r.quantity>0)}}catch(t){console.warn("Error loading cart from localStorage:",t)}return[]},[]),oe=o.useCallback((t,s)=>{if(!d.current||n)return;if(s<=0){_(t);return}const r=i?.find(l=>l.id===t);if(!r){h({title:"Error",description:"Producto no encontrado",variant:"destructive"});return}if(r.stock!==null&&s>r.stock){h({title:"Stock insuficiente",description:`Solo hay ${r.stock} unidades disponibles`,variant:"destructive"});return}E(l=>{const p=l.map(m=>m.product.id===t?{...m,quantity:s}:m);return q(p),p})},[_,n,i,h,q]);return o.useEffect(()=>(d.current=!0,()=>{d.current=!1,F()}),[F]),o.useEffect(()=>{if(!B&&i&&i.length>0){const t=O();if(t.length>0){const s=t.filter(r=>{const l=i.find(p=>p.id===r.product.id);return l&&l.isActive}).map(r=>{const l=i.find(p=>p.id===r.product.id);return l?{...r,product:l}:r});s.length>0&&(E(s),s.length!==t.length&&q(s))}me(!0)}},[i,B,O,q]),o.useEffect(()=>{if(!te&&i&&i.length>0){const t=ne();if(t.size>0){const s=new Set(Array.from(t).filter(r=>{const l=i.find(p=>p.id===r);return l&&l.isActive}));U(s),s.size!==t.size&&R(s)}fe(!0)}},[i,te,ne,R]),o.useEffect(()=>{if(!B||!i)return;const t=setInterval(()=>{const s=JSON.stringify(g),r=localStorage.getItem("shopping-cart")||"[]";if(s!==r){const l=O();if(l.length>0){const p=l.filter(m=>{const u=i.find(f=>f.id===m.product.id);return u&&u.isActive}).map(m=>{const u=i.find(f=>f.id===m.product.id);return u?{...m,product:u}:m});E(p)}else g.length>0&&E([])}},1e3);return()=>clearInterval(t)},[g,B,i,O]),o.useEffect(()=>{const t=()=>{d.current&&F()},s=()=>{F()},r=()=>{document.visibilityState==="hidden"&&d.current&&F()},l=u=>{if(u.key==="shopping-cart"&&!n&&d.current)if(u.newValue===null||u.newValue==="[]")E([]);else try{const f=JSON.parse(u.newValue);if(Array.isArray(f)&&i){const $=f.filter(j=>{const w=i.find(J=>J.id===j.product.id);return w&&w.isActive}).map(j=>{const w=i.find(J=>J.id===j.product.id);return w?{...j,product:w}:j});E($)}}catch(f){console.warn("Error parsing cart from storage:",f)}},p=()=>{if(!n&&d.current){const u=O();if(i&&i.length>0){const f=u.filter($=>{const j=i.find(w=>w.id===$.product.id);return j&&j.isActive}).map($=>{const j=i.find(w=>w.id===$.product.id);return j?{...$,product:j}:$});E(f)}}},m=u=>{if(u.key==="store-favorites"&&!n&&d.current)if(u.newValue===null||u.newValue==="[]")U(new Set);else try{const f=JSON.parse(u.newValue);if(Array.isArray(f)&&i){const $=new Set(f.filter(j=>{const w=i.find(J=>J.id===j);return w&&w.isActive}));U($)}}catch(f){console.warn("Error parsing favorites from storage:",f)}};return window.addEventListener("popstate",t),window.addEventListener("beforeunload",s),window.addEventListener("storage",l),window.addEventListener("storage",m),window.addEventListener("cartUpdated",p),document.addEventListener("visibilitychange",r),()=>{window.removeEventListener("popstate",t),window.removeEventListener("beforeunload",s),window.removeEventListener("storage",l),window.removeEventListener("storage",m),window.removeEventListener("cartUpdated",p),document.removeEventListener("visibilitychange",r)}},[F,n,i,O]),o.useEffect(()=>{i&&I&&!I.map(s=>s.id).includes(v)&&v!=="all"&&L("all")},[i,I,v]),he||pe?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(G,{}),e.jsx(z,{children:e.jsxs("div",{className:"container mx-auto px-4 py-16 flex flex-col items-center space-y-4 navbar-fixed-body",children:[e.jsx(Ee,{size:"lg",className:"text-primary"}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Cargando tienda..."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Por favor espere mientras cargamos los productos."})]})]})}),e.jsx(Z,{})]}):se.isStoreEnabled?e.jsxs("div",{className:"min-h-screen bg-background navbar-fixed-body",style:{backgroundColor:A.backgroundColor||"inherit",color:A.textColor||"inherit",fontFamily:A.fontFamily||"inherit"},children:[e.jsx(Be,{title:"Tienda - Productos en línea",description:"Descubre nuestra colección de productos. Envío gratis en pedidos superiores a $500."}),e.jsx(G,{}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs(z,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",style:{color:A.textColor||"#111111",fontFamily:A.fontFamily||"inherit"},children:"Tienda"}),e.jsx("p",{className:"text-xl",style:{color:A.textColor||"#666666",fontFamily:A.fontFamily||"inherit"},children:"Descubre nuestra colección de productos"})]}),e.jsxs(ie,{open:W&&!n,onOpenChange:t=>{n||C(t)},children:[e.jsx($e,{asChild:!0,children:e.jsxs(b,{variant:"outline",className:"gap-2",disabled:n,children:[e.jsx(Y,{className:"h-4 w-4"})," Carrito (",g.length,")"]})}),e.jsxs(le,{className:"max-w-md",children:[e.jsx(Fe,{children:e.jsx(Le,{children:"Carrito de compras"})}),e.jsx("div",{className:"space-y-4",children:g.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Tu carrito está vacío"}):e.jsxs(e.Fragment,{children:[g.map(t=>e.jsxs("div",{className:"flex items-center justify-between space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium line-clamp-1",children:t.product.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["$",(t.product.price/100).toFixed(2)," x ",t.quantity]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{variant:"outline",size:"sm",onClick:()=>oe(t.product.id,t.quantity-1),disabled:n,children:e.jsx(de,{className:"h-3 w-3"})}),e.jsx("span",{className:"w-8 text-center",children:t.quantity}),e.jsx(b,{variant:"outline",size:"sm",onClick:()=>{if(!n){const s=i?.find(r=>r.id===t.product.id);if(s?.stock!==null&&t.quantity>=s.stock){h({title:"Stock insuficiente",description:`Solo hay ${s.stock} unidades disponibles`,variant:"destructive"});return}oe(t.product.id,t.quantity+1)}},disabled:n||(()=>{const s=i?.find(r=>r.id===t.product.id);return s?.stock!==null&&t.quantity>=s.stock})(),children:e.jsx(ce,{className:"h-3 w-3"})}),e.jsx(b,{variant:"ghost",size:"sm",onClick:()=>_(t.product.id),disabled:n,children:e.jsx(Pe,{className:"h-3 w-3"})})]}),e.jsxs("p",{className:"font-semibold",children:["$",(t.product.price/100*t.quantity).toFixed(2)]})]},t.product.id)),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{className:"font-semibold",children:"Total:"}),e.jsxs("span",{className:"font-bold text-lg",children:["$",ge.toFixed(2)]})]}),e.jsx(b,{className:"w-full",onClick:ye,disabled:n,children:"Proceder al Checkout"})]})]})})]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-8",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ie,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(Ae,{placeholder:"Buscar productos...",value:x,onChange:t=>!n&&y(t.target.value),className:"pl-10",disabled:n})]}),e.jsxs(qe,{value:v,onValueChange:t=>!n&&L(t),disabled:n,children:[e.jsx(Te,{className:"w-[200px]",children:e.jsx(Me,{placeholder:"Categoría"})}),e.jsx(Oe,{children:xe.map(t=>e.jsx(ze,{value:t,children:K(t)},t))})]})]})]}),e.jsx(z,{delay:.4,children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:re.map((t,s)=>e.jsx(z,{delay:.1*(s%8),children:e.jsxs(De,{className:"h-full overflow-hidden group hover:shadow-lg transition-all duration-300 cursor-pointer",onClick:()=>!n&&je(t),children:[e.jsxs("div",{className:"relative",children:[t.images?.[0]&&e.jsx(H,{src:t.images[0],alt:t.name,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),t.stock!==null&&t.stock<=5&&t.stock>0&&e.jsx(T,{variant:"destructive",className:"absolute top-2 right-2",children:"¡Pocas unidades!"}),t.stock===0&&e.jsx(T,{variant:"secondary",className:"absolute top-2 right-2",children:"Agotado"})]}),e.jsxs(Ve,{className:"pb-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(Re,{className:"text-lg line-clamp-2",children:t.name}),e.jsx(b,{variant:"ghost",size:"sm",className:"shrink-0 p-1",onClick:r=>{r.stopPropagation(),!n&&ve(t.id)},disabled:n,children:e.jsx(Je,{className:`h-4 w-4 ${ue.has(t.id)?"fill-red-500 text-red-500":"text-gray-400"}`})})]}),t.categoryId&&e.jsx(T,{variant:"outline",className:"w-fit",children:K(t.categoryId)})]}),e.jsxs(We,{className:"pt-0 flex-1 flex flex-col",children:[t.description&&e.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-3 flex-1",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[e.jsxs("span",{className:"text-2xl font-bold text-primary",children:["$",(t.price/100).toFixed(2)]}),e.jsxs(b,{onClick:r=>{r.stopPropagation(),!n&&V.mutate({productId:t.id})},disabled:t.stock!==null&&t.stock===0||V.isPending||n,className:"gap-2",children:[e.jsx(Y,{className:"h-4 w-4"})," Agregar"]})]})]})]})},t.id))})}),e.jsx(ie,{open:!!a&&!n,onOpenChange:t=>{!t&&!n&&(M(null),P(1))},children:e.jsx(le,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:a&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx("div",{className:"relative",children:a.images&&a.images.length>0?e.jsx("div",{className:"w-full",children:a.images.length===1?e.jsx("div",{className:"aspect-square w-full",children:e.jsx(H,{src:a.images[0],alt:a.name,className:"w-full h-full object-cover rounded-lg shadow-lg"})}):e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"aspect-square w-full overflow-hidden rounded-lg shadow-lg relative group bg-gray-100",children:[e.jsxs("div",{className:"relative w-full h-full overflow-hidden",children:[e.jsx(H,{src:a.images[S],alt:`${a.name} ${S+1}`,className:"w-full h-full object-cover transition-all duration-300 ease-out group-hover:scale-125 cursor-zoom-in",style:{transformOrigin:"center center"}}),e.jsx("div",{className:"absolute inset-0 bg-black/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]}),a.images.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(b,{variant:"secondary",size:"sm",className:"absolute left-3 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-all duration-200 bg-white/95 hover:bg-white shadow-xl border-0 backdrop-blur-sm h-10 w-10 rounded-full",onClick:t=>{t.stopPropagation();const s=S===0?a.images.length-1:S-1;D(s)},disabled:n,children:e.jsx(He,{className:"h-5 w-5"})}),e.jsx(b,{variant:"secondary",size:"sm",className:"absolute right-3 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-all duration-200 bg-white/95 hover:bg-white shadow-xl border-0 backdrop-blur-sm h-10 w-10 rounded-full",onClick:t=>{t.stopPropagation();const s=S===a.images.length-1?0:S+1;D(s)},disabled:n,children:e.jsx(Ue,{className:"h-5 w-5"})}),e.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2 bg-black/20 backdrop-blur-sm rounded-full px-3 py-2",children:a.images.map((t,s)=>e.jsx("button",{className:`w-2.5 h-2.5 rounded-full transition-all duration-200 ${s===S?"bg-white scale-125 shadow-lg":"bg-white/60 hover:bg-white/80 hover:scale-110"}`,onClick:r=>{r.stopPropagation(),D(s)}},s))})]})]}),e.jsx("div",{className:"flex gap-2 mt-4 overflow-x-auto pb-2 scrollbar-hide",children:a.images.map((t,s)=>e.jsx("div",{className:"flex-shrink-0 cursor-pointer group/thumb",onClick:r=>{r.stopPropagation(),D(s)},children:e.jsxs("div",{className:`relative overflow-hidden rounded-md transition-all duration-200 border-2 ${s===S?"border-primary shadow-lg scale-105":"border-gray-200 hover:border-primary/50 hover:scale-105"}`,children:[e.jsx(H,{src:t,alt:`Thumbnail ${s+1}`,className:"w-20 h-20 object-cover"}),e.jsx("div",{className:`absolute inset-0 transition-opacity duration-200 ${s===S?"bg-transparent":"bg-black/10 group-hover/thumb:bg-transparent"}`})]})},s))})]})}):e.jsx("div",{className:"aspect-square w-full bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx("div",{className:"text-4xl mb-2",children:"📷"}),e.jsx("p",{children:"Sin imagen disponible"})]})})}),e.jsxs("div",{className:"flex flex-col justify-between space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-primary mb-2",children:a.name}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxs("span",{className:"text-3xl font-bold text-primary",children:["$",(a.price/100).toFixed(2)]}),a.comparePrice&&a.comparePrice>a.price&&e.jsxs("span",{className:"text-xl text-muted-foreground line-through",children:["$",(a.comparePrice/100).toFixed(2)]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.categoryId&&e.jsx(T,{variant:"outline",className:"text-sm",children:K(a.categoryId)}),a.stock!==null&&a.stock<=5&&a.stock>0&&e.jsx(T,{variant:"destructive",children:"¡Pocas unidades!"}),a.stock===0&&e.jsx(T,{variant:"secondary",children:"Agotado"})]}),a.tags?.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:a.tags.map((t,s)=>e.jsx(T,{variant:"secondary",className:"text-xs",children:t},s))}),a.description&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold text-lg",children:"Descripción"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:a.description})]}),a.stock!==null&&e.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Stock disponible:"}),e.jsxs("span",{className:`font-bold ${a.stock<=5?"text-red-600":"text-green-600"}`,children:[a.stock," unidades"]})]})})]}),e.jsxs("div",{className:"space-y-4 border-t pt-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center border rounded-lg",children:[e.jsx(b,{variant:"ghost",size:"sm",onClick:()=>!n&&P(Math.max(1,k-1)),disabled:n,className:"h-12 px-4",children:e.jsx(de,{className:"h-4 w-4"})}),e.jsx("span",{className:"px-6 py-3 border-x font-semibold text-lg",children:k}),e.jsx(b,{variant:"ghost",size:"sm",onClick:()=>{if(!n&&a.stock!==null){const t=g.find(r=>r.product.id===a.id)?.quantity||0,s=Math.max(0,a.stock-t);k<s?P(k+1):h({title:"Límite alcanzado",description:`Ya tienes ${t} en el carrito. Stock total: ${a.stock}`,variant:"destructive"})}else!n&&a.stock===null&&P(k+1)},disabled:n||a.stock!==null&&(()=>{const t=g.find(r=>r.product.id===a.id)?.quantity||0,s=Math.max(0,a.stock-t);return k>=s})(),className:"h-12 px-4",children:e.jsx(ce,{className:"h-4 w-4"})})]}),e.jsxs(b,{onClick:be,className:"flex-1 h-12 text-lg font-semibold",disabled:a.stock!==null&&a.stock===0||V.isPending||n,size:"lg",children:[e.jsx(Y,{className:"h-5 w-5 mr-2"}),"Agregar al carrito"]})]}),e.jsx("div",{className:"bg-primary/10 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-lg font-medium",children:"Total:"}),e.jsxs("span",{className:"text-2xl font-bold text-primary",children:["$",(a.price/100*k).toFixed(2)]})]})})]})]})]})})}),re.length===0&&!n&&e.jsx(z,{delay:.2,children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🛒"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No hay productos disponibles"}),e.jsx("p",{className:"text-muted-foreground",children:x||v!=="all"?"No se encontraron productos que coincidan con los filtros.":"Actualmente no tenemos productos en stock."}),(x||v!=="all")&&e.jsx(b,{variant:"outline",className:"mt-4",onClick:()=>{n||(y(""),L("all"))},disabled:n,children:"Limpiar filtros"})]})})]}),e.jsx(Z,{})]}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(G,{}),e.jsx(z,{children:e.jsxs("div",{className:"container mx-auto px-4 py-16 text-center navbar-fixed-body",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Tienda"}),e.jsx("p",{className:"text-xl text-muted-foreground",children:"La tienda no está disponible en este momento."})]})}),e.jsx(Z,{})]})}export{tt as default};
